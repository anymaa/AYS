@using ApartmanYonetimSistemi.Models
@using ApartmanYonetimSistemi.Controllers
@{
    ViewBag.Title = "GiderEkle";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var db = new ApartmanYonetimSistemiEntities();

}

<div class="static-content">
    <div class="page-content">
        <ol class="breadcrumb">

            <li>
                <a href="Index">Ana Sayfa</a>
            </li>
            <li>
                <a href="Aidatlar">Giderler</a>
            </li>
            <li class="active">
                <a href="GiderEkle">Gider Ekle</a>
            </li>
        </ol>
        <div class="container-fluid">

            <div data-widget-group="group1">
                <div class="panel panel-default" data-widget='{"draggable": "false"}'>
                    <div class="panel-heading">
                        <h2>GİDER EKLE</h2>
                        <div class="panel-ctrls" data-actions-container="" data-action-collapse='{"target": ".panel-body"}'></div>
                    </div>
                    <div class="panel-editbox" data-widget-controls=""></div>
                    <div class="panel-body">
@{
    <div class="form-horizontal row-border">

        <div class="form-group">
            <label class="col-sm-2 control-label">Açıklama</label>
            <div class="col-sm-8">
                <input type="text" id="aciklama" class="form-control">
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Tutar</label>
            <div class="col-sm-8">
                <input type="text" id="tutar" class="form-control"/>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Düzenlenme ve Ödeme Tarihi</label>
            <div class="col-sm-8">
                <div class="input-group">
                    <span class="input-group-addon"><i class="ti ti-calendar"></i></span>
                    <input type="text" class="form-control" id="daterangepicker1">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Ödeme Durumu</label>
            <div class="col-sm-8">
                <ul class="demo-btns mb-n">
                    <li><input class="bootstrap-switch" type="checkbox" id="odemedurumu" data-on-text="<i class='fa fa-thumbs-up'></i>" data-on-color="success" data-off-text="<i class='fa fa-thumbs-down'></i>" data-off-color="danger" /></li>
                    <p class="help-block">Yeşil : Ödendi | Kırmızı : Ödenecek</p>
                </ul>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">Kategori</label>
            <div class="col-sm-8">
                @foreach (var item in db.TBLCATEGORY)
                {

                    <input type="hidden" id="e12" style="width: 100% !important" value="@item.CATEGORYNAME"/>
                }
                <p class="help-block">İşleme uygun kategoriyi seçin veya yeni kategori ekleyin.</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-8">
                <div class="fileinput fileinput-new" data-provides="fileinput">
                    <span class="btn btn-default btn-file">
                        <span class="fileinput-new">Fatura Yükle</span>
                        <span class="fileinput-exists">Faturayı değiştir</span>
                        <input type="file" id="fatura" name="...">
                    </span>
                    <span class="fileinput-filename"></span>
                    <a href="#" class="close fileinput-exists" data-dismiss="fileinput" style="float: none">&times;</a>
                </div>
            </div>
        </div>

        <div class="hidden form-group">
            <label class="col-sm-2 control-label">Fullscreen Textarea</label>
            <div class="col-sm-8">
                <textarea class="form-control fullscreen"></textarea>
            </div>
        </div>

        <div class="panel-footer">
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2 form-actions clearfix">
                    <button type="submit" class="btn-primary btn"  onclick="GiderEkle()">Kaydet</button>
                    <a href="Giderler"><button class="btn-default btn">Vazgeç</button></a>
</div>
            </div>
        </div>


    </div>
}                  
</div>

                </div>


            </div>

        </div> <!-- .container-fluid -->
    </div> <!-- #page-content -->
</div>

<!-- Load page level scripts-->
<script type="text/javascript" src="~/assets/plugins/form-multiselect/js/jquery.multi-select.min.js"></script>  			<!-- Multiselect Plugin -->
<script type="text/javascript" src="~/assets/plugins/quicksearch/jquery.quicksearch.min.js"></script>           			<!-- Quicksearch to go with Multisearch Plugin -->
<script type="text/javascript" src="~/assets/plugins/form-typeahead/typeahead.bundle.min.js"></script>                 	<!-- Typeahead for Autocomplete -->
<script type="text/javascript" src="~/assets/plugins/form-select2/select2.js"></script>                     			<!-- Advanced Select Boxes -->
<script type="text/javascript" src="~/assets/plugins/form-autosize/jquery.autosize-min.js"></script>            			<!-- Autogrow Text Area -->
<script type="text/javascript" src="~/assets/plugins/form-colorpicker/js/bootstrap-colorpicker.min.js"></script> 			<!-- Color Picker -->
<script type="text/javascript" src="~/assets/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.js"></script>      <!-- Touchspin -->
<script type="text/javascript" src="~/assets/plugins/form-fseditor/jquery.fseditor-min.js"></script>            			<!-- Fullscreen Editor -->
<script type="text/javascript" src="~/assets/plugins/form-jasnyupload/fileinput.min.js"></script>               			<!-- File Input -->
<script type="text/javascript" src="~/assets/plugins/bootstrap-tokenfield/bootstrap-tokenfield.min.js"></script>     		<!-- Tokenfield -->
<script type="text/javascript" src="~/assets/plugins/card/lib/js/card.js"></script> 										<!-- Card -->
<!-- <script type="text/javascript" src="~/assets/plugins/iCheck/icheck.min.js"></script>  -->    							<!-- iCheck // already included on site-level -->
<script type="text/javascript" src="~/assets/plugins/switchery/switchery.js"></script>     								<!-- Switchery -->
<script type="text/javascript" src="~/assets/plugins/jquery-chained/jquery.chained.min.js"></script> 						<!-- Chained Select Boxes -->
<script type="text/javascript" src="~/assets/plugins/jquery-mousewheel/jquery.mousewheel.min.js"></script> <!-- MouseWheel Support -->
<script type="text/javascript" src="~/assets/demo/demo-formcomponents.js"></script>
<script type="text/javascript" src="~/assets/plugins/form-inputmask/jquery.inputmask.bundle.min.js"></script>  	<!-- Input Masks Plugin -->
<script type="text/javascript" src="~/assets/demo/demo-mask.js"></script>
<script type="text/javascript" src="~/assets/plugins/form-daterangepicker/moment.min.js"></script>              			<!-- Moment.js for Date Range Picker -->
<script type="text/javascript" src="~/assets/plugins/form-colorpicker/js/bootstrap-colorpicker.min.js"></script> 			<!-- Color Picker -->
<script type="text/javascript" src="~/assets/plugins/form-daterangepicker/daterangepicker.js" charset="windows-1254"></script>     				<!-- Date Range Picker -->
<script type="text/javascript" src="~/assets/plugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>      			<!-- Datepicker -->
<script type="text/javascript" src="~/assets/plugins/bootstrap-timepicker/bootstrap-timepicker.js"></script>      			<!-- Timepicker -->
<script type="text/javascript" src="~/assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script> <!-- DateTime Picker -->
<script type="text/javascript" src="~/assets/plugins/clockface/js/clockface.js"></script>     								<!-- Clockface -->
<script type="text/javascript" src="~/assets/demo/demo-pickers.js" charset="windows-1254"></script>
<script type="text/javascript" src="~/assets/plugins/pines-notify/pnotify.min.js"></script>

<!-- End loading page level scripts-->

<script>
    $("#e12").select2({ width: "100%", tags: ["Aidat", "Demirbaş", "Elektrik", "Sıcak Su", "Temizlik"] });
</script>

<script>

    function GiderEkle() {
        if ($("#aciklama").val() == "" || $("#tutar").val() == "" || $("#daterangepicker1").val() == "") {
            new PNotify({
                title: 'Ups!',
                text: 'Lütfen alanları doldurunuz.',
                type: 'error',
                icon: 'ti ti-close',
                styling: 'fontawesome'
            });
        } else {
            new PNotify({
                title: 'Gider Eklendi',
                text: 'Gider verisi başarılyla eklendi.',
                type: 'success',
                icon: 'ti ti-check',
                styling: 'fontawesome'
            });



            $.post("@Url.Action("GiderEkle", "Dashboard")", {
                aciklama: $("#aciklama").val(),
                tutar: $("#tutar").val(),
                start: $("#daterangepicker1").val().slice(0, 10),
                end: $("#daterangepicker1").val().slice(13, 23),
                odemedurumu: $("#odemedurumu").bootstrapSwitch('state', false),
                fatura: $("#fatura").val(),
                kategori: $("#e12").val()

            }).then(function() {
                location.reload("@Url.Action("Giderler", "Dashboard")");

            
        });
            };
    }

   
</script>

